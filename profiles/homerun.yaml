---
preSurvey:
  - prompt: "SYSTEM"
    name: system
    options:
      - "github"
      - "gitlab"
      - "ansible"

  - prompt: "SEVERITY"
    name: severity
    options:
      - "INFO"
      - "ERROR"
      - "SUCCESS"

# surveys:
#   - tests/{{ .system }}-survey.yaml

aliases:
  - "gitlab-survey:git"
  - "github-survey:git"

bodyTemplate: |
  {{ $object := randomUsecase .system .allUsecases }}
  {{ $verb := getUsecaseVerb $object .system .allUsecases }}
  {{ $author := random .authors }}
  {{ $assignee := random .authors }}
  {
      "System": "{{ .system }}",
      "Title": "{{ $object }} {{ $verb }}",
      "Message": "{{ $object }} {{ textBlock .severity $verb .messageTemplates }}",
      "Severity": "{{ .severity }}"
      "Author": "{{ $author }}",
      "Tags": "{{ random .authors }}",
      "Timestamp": "{{ timestamp }}",
      "AssigneeName": "{{ $assignee }}",
      "AssigneeAddress": "{{ getValueFromStringMap $assignee .authorAddresses }}",
  }

messageTemplates:
  INFO:
    run: "is running"
    create: "was created"
  ERROR:
    run: "did not run successfully"
    create: "was not created successfully"
  SUCCESS:
    run: "did run successfully"
    create: "was created successfully"


usecases:
  gitlab:
    - "PullRequest:create"
    - "PipelineRun:run"
    - "Issue:create"
  github:
    - "MergeRequest:create"
    - "WorflowRun:run"
    - "Issue:create"
  ansible:
    - "PlaybookRun:run"
    - "CollecionBuild:run"

authors:
  - "mark:mark@blink182.com"
  - "tom:tom@blink182.com"
  - "travis:travis@blink182.com"

# preValues:
#   git:
#     systems:
#       - "github"
#       - "gitlab"
#     github-events:
#       - "PullRequest"
#       - "Pipeline Run"
#       - "Issue"



# scenarios:
#   github-:
#     title: |
#     message:
#       - "Please fill out the following survey to help us understand your GitLab setup."
#       - "Please fill out the following survey to help us understand your GitHub setup."
#     severity: "{{ .severity }}"
#     author:          author,
#     timestamp:       timestamp,
#     system:
#       - "github"
#       - "gitlab"
#     tags:            tags,
#     assigneeAddress: assigneeUrl,
#     assigneeName:    assignee,
#     artifacts:       artifacts,
#     url:             url,
